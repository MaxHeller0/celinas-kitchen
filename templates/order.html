{% extends "layout.html" %}

{% block title %}
  Order Details
{% endblock %}

{% block main %}
  <h1>
    {{order['description']}}
  </h1>
  <table>
     <thread>
       <tr>
          <th scope="col">Quantity</th>
          <th scope="col">Dish</th>
          <th scope="col">Unit Price</th>
          <th scope="col">Price</th>
          <th scope="col"></th>
        </tr>
      </thread>
    <tbody>
      {% for item in order['items'] %}
      <tr>
        <td>{{item['count']}}</td>
        <td>{{item['name']}}</td>
        <td>{{item['unit_price']}}</td>
        <td>{{item['price']}}</td>
        <form action="{{url_for('order', order_id=id)}}" method="POST">
          <td><button class="btn btn-default" name="delete" value="{{item['id']}}" type="submit">Delete</button></td>
        </form>
      </tr>
      {% endfor %}
      <tr>
        <form action="{{url_for('order', order_id=id)}}" method="POST">
          <td><input class="form-control" type="number" min="1" name="quantity" value="1"></td>
          <td>
            <input class="form-control" list="recipes" name="name" placeholder="Recipe Name" autofocus="True">
            <datalist name="recipes" id="recipes">
              {% if recipes %}
              {% for recipe in recipes %}
                <option value="{{recipe.name|title}}">
              {% endfor %}
              {% endif %}
            </datalist>
          </td>
          <td><input class="form-control" type="number" step=".01" min="0" name="price" placeholder="Override stored price"></td>
          <td><button class="btn btn-default" type="submit">Add Item(s)</button></td>
          <td></td>
        </form>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td>Subtotal</td>
        <td>{{order['total']|usd}}</td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td>Tax</td>
        <td>{{(order['total'] * 0.08)|usd}}</td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <th scope="row">Total</th>
        <td>{{(order['total'] * 1.08)|usd}}</td>
        <td></td>
      </tr>
    </tbody>
  </table>
{% endblock %}
